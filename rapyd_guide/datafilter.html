<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Rapyd Components - User Guide</title>
<link rel="stylesheet" type="text/css" media="all" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/syntax.css" />
<script type="text/javascript" src="js/nav.js"></script>
<script class="javascript" src="js/syntax.js"></script>
<script class="javascript" src="js/syntax_php.js"></script>
</head>
<body onload="dp.SyntaxHighlighter.HighlightAll('code');">

	<div id="content">
  
		<div class="line"></div>
  

<!-- begin header -->
<script type="text/javascript">header();</script>
<!-- end header -->



    <div class="left">

<!-- begin sidebar -->
<script type="text/javascript">sidebar();</script>
<!-- end sidebar -->



    </div>
    
    
		<div class="right">



  <div>

    <h2>DataFilter</h2>
    <p>
      DataFilter extends <a href="dataform.html">DataForm</a>, it is a form-filter heper.<br/>
      It build a complete SELECT sql query, based on the user input. <br/>
      You can build a filter form with your custom fields (like in DataForm).<br/>
      It is a <a href="themes.html">template</a> based component.<br/>
		</p>

    <p>
    Note, this component is based upon <a href="fields.html">fields</a>.
    Fields are a collection of classes to manage single items of a form.
    </p>
    
    <p>
    This component is thought to work in conjunction with <a href="datagrid.html">DataGrid</a> or <a href="datatable.html">DataTable</a>.<br/>
    It is a convenient way to filter lists.<br/>
    It use a persistence system (php session variables) to store field status (to enable pagination), so it depend from rapyd_session class.
    <br/>

    </p>
    
  </div>
  
<div class="line"></div>
      
<h3>Sample:</h3>


  <textarea name="code" class="php:nogutter" rows="20" cols="100">
  
    $this->rapyd->load("datafilter");
    
    $filter = new DataFilter("Article Filter", "articles");
    $filter->title = new inputField("Title", "title");
    
    $filter->ispublic = new dropdownField("Public", "public");
    $filter->ispublic->option("","");
    $filter->ispublic->options(array("y"=>"Yes","n"=>"No"));
    
    $filter->buttons("reset","search");    
    $filter->build();
    
    $result = $filter->db->get();
    $sql = $filter->db->last_query();
    
    $data["output"] = $filter->output. $sql; 
    
   </textarea>
   
   

      
<img src="img/datafilter.gif" />

    
<div class="line"></div>

		<h3>constructor:</h3>
    <p>
		<var>DataFilter($title, $datasource)</var><br/>
    params: string $title (can be empty), mixed <a href="index.html#datasource">$datasource</a> <br/><br/>
    </p>

<div class="line_under"></div>

    <h3>main properties:</h3>
    <p>
		<var>back_url</var><br/>
    string back_url is the link-back, it can be used to join a DataEdit (that edit a single record) with a DataGrid (that can scaffold records)<br/><br/>
    </p>

<div class="line_under"></div>

		<h3>fields:</h3>
		<p>
    In a DataFilter you can append fields (inputs, extareas etc..) like in a <a href="dataform.html#fields">DataForm</a><br/>
    <br/>
    Note: you can manage clauses and operators (of WHERE) directly on fields:
    
    
  <textarea name="code" class="php:nogutter" rows="20" cols="100">
  
    $filter->title = new inputField("Title", "title");
    $filter->title->clause = "like";
    
    $filter->ispublic = new dropdownField("Visibile", "visible");
    $filter->ispublic->option("y","Si");
    $filter->ispublic->option("n","No");
    $filter->ispublic->clause = "where";
    //$filter->ispublic->operator = "="; //by default 
    
   </textarea>
  
		</p>
    


<div class="line_under"></div>

		<h3>main methods:</h3>
		<p>
        
    
		<var>button($name, $caption, $action, $position="BL")</var><br/>
		<var>script($script, $status="create")</var><br/>
    from <a href="dataform.html#methods">DataForm</a><br/>
     <br/>
         
		<var>buttons($button[,$button..])</var><br/>
    possible params are: "reset", "search"<br/>
    (note: rapyd support multilanguage, so you can customize labels in <strong>/system/application/rapyd/language</strong>)<br/>
    <br/>
    
		<var>build()</var><br/>
    build output and eventually process actions (means: prepare a sql SELECT statement with the built WHERE)<br/>
		</p>
		
<div class="line_under"></div>

		<h3>output:</h3>
		<p>
		<var>output</var><br/>
    string, the built html form.
		</p>

		
	 </div>
		
</div>
    
<div class="line"></div>
    
<!-- begin footer -->
<script type="text/javascript">footer();</script>
<!-- end footer -->

    
	</div>

  
</body>
</html>